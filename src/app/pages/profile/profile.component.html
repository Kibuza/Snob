<div class="container mx-auto px-4 py-8">
  <div
    class="bg-white shadow-md rounded-lg overflow-hidden md:grid md:grid-cols-12"
  >
    <div class="p-4 md:p-8 md:col-span-4">
      <!-- Avatar -->
      <div class="flex items-center justify-center mb-6">
        <img
          class="h-32 md:h-52 w-32 md:w-52 rounded-full object-cover"
          [src]="user.photoURL"
          alt="Avatar"
        />
      </div>
      <app-storage></app-storage>
    </div>
    <div class="p-4 md:p-8 md:col-span-8">
      <!-- Nombre de usuario -->
      <div class="mb-4">
        <label class="block text-gray-700 font-bold mb-2 text-xl" for="username"
          >Nombre:</label
        >
        <p class="text-gray-900">{{ user.displayName }}</p>
      </div>
      <!-- Correo electrónico -->
      <div class="mb-4">
        <label class="block text-gray-700 font-bold mb-2 text-xl" for="email"
          >Email:</label
        >
        <p class="text-gray-900">{{ user.email }}</p>
      </div>
      <div class="mb-6">
        <label class="block text-gray-700 font-bold mb-2 text-xl" for="email"
          >Seguidos:</label
        >
        @if(seguidos.length > 0){
        <div class="flex flex-wrap gap-3 items-start">
          @for (usuario of seguidos.slice(0, 4); track $index){
          <div class="w-full md:w-1/3 lg:w-1/6 relative">
            <button
              class="bg-red-500 text-white rounded-full p-1 absolute top-0 right-0"
              (click)="dejardeSeguir(usuario)"
            >
              X
            </button>
            <img
              [src]="usuario.avatar"
              alt=""
              class="w-full h-32 object-cover rounded-full"
            />
            <p class="text-gray-900 mt-2">{{ usuario.username }}</p>
          </div>
          }
        </div>
        }@else{
        <p>Aún no sigues a nadie.</p>
        }
      </div>
      <div class="mb-8">
        <label class="block text-gray-700 font-bold mb-4 text-xl" for="email"
          >Favoritas:</label
        >
 @if(favorites.length > 0){
        <div class="flex flex-wrap gap-3 items-start">
          @for (pelicula of favorites.slice(startIndex, startIndex + 6); track
          $index){
          <div class="w-full md:w-1/3 lg:w-[100px] h-44 relative">
            <button
              class="bg-red-500 text-white rounded-full p-1 absolute top-0 right-0"
              (click)="quitarFavorito(pelicula)"
            >
              X
            </button>
            <img
              [src]="
                'https://image.tmdb.org/t/p/original' + pelicula.poster_path
              "
              alt=""
              class="w-full h-36 object-cover"
            />
            <p class="text-gray-900 mt-2 line-clamp-2">{{ pelicula.title }}</p>
          </div>
          }
          @if(favorites.length > 6 && (favorites.length - startIndex) >= 0){<button
            class="transition duration-300 ease-in-out bg-slate-500 hover:bg-slate-800 text-white text-xs font-semibold py-1 px-4 my-2 rounded"
            (click)="mostrarMas()"
          >
            Ver más</button
          >}
        </div>
        }@else{
        <p>Aún no tienes películas favoritas.</p>
        }
      </div>
      <div>
        <a
          href="#"
          (click)="logoutUser()"
          class="transition duration-300 ease-in-out bg-botones hover:bg-botones-hover text-white font-semibold py-2 px-4 rounded"
        >
          Cerrar sesión
        </a>
      </div>
    </div>
  </div>
</div>
